{% extends "layout.html" %}
{% block body %}

<div class="block-31" style="position: relative;">
    <div class="owl-carousel loop-block-31">
        <div class="block-30 block-30-sm item" style="background-image: url('static/images/bg_5.jpg');" data-stellar-background-ratio="0.5">
            <div class="container">
                <div class="row align-items-center justify-content-center text-center">
                    <div class="col-md-7">
                        <h2 class="heading mb-5">Join Us Today</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="featured-section overlay-color-2">
    <div class="container">
        <div class="row">
            <div class="col-md-6 mb-5 mb-md-0">
                <img src="static/images/join_us.jpeg" style="height: 500px; width: 350px; margin-top: 20px;" alt="Image placeholder" class="img-fluid">
            </div>

            <div class="col-md-6 pl-md-5">
                <div class="form-volunteer">
                    <h2 style = "font-weight: 900; color:black; text-decoration:underline;">Be A Volunteer Today</h2>
                    <form action="/join_us" method="post" onsubmit="return validateForm()">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <div class="form-group">
                          <input type="text" class="form-control px-3 py-3" name="name" id="name" placeholder="Your Name" required minlength="2">
                        </div>
                        <div class="form-group">
                          <input type="email" class="form-control px-3 py-3" name="email" id="email" placeholder="Your Email" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
                        </div>
                        <div class="form-group">
                          <input type="tel" class="form-control px-3 py-3" name="phone" id="phone" placeholder="Your Phone no." required pattern="[0-9]{10}" title="10-digit phone number">
                        </div>
                        <div class="form-group">
                          <textarea name="reason" id="message" cols="30" rows="7" class="form-control px-3 py-3" placeholder="Your reason to join?" required minlength="10"></textarea>
                        </div>
                        <div class="form-group">
                          <input type="submit" value="Send Message" class="btn btn-primary py-3 px-5">
                        </div>
                      </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function validateForm() {
        var name = document.getElementById("name").value.trim();
        var email = document.getElementById("email").value.trim();
        var phone = document.getElementById("phone").value.trim();
        var message = document.getElementById("message").value.trim();

        // Check if any field is empty
        if (!name || !email || !phone || !message) {
            alert("All fields must be filled out");
            return false;
        }

        // Email validation regex
        var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            alert("Please enter a valid email address");
            return false;
        }

        // Phone number validation: Exactly 10 digits
        var phoneRegex = /^\d{10}$/;
        if (!phoneRegex.test(phone)) {
            alert("Please enter a valid 10-digit phone number");
            return false;
        }

        return true;
    }

    function showSuccessMessage() {
        alert("Message sent successfully!");
    }

    {% if success_message %}
        showSuccessMessage();
    {% endif %}

</script>
{% endblock %}
