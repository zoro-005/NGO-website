{% extends "layout.html" %}
{% block body %}
  <!-- END nav -->
  
  <div class="block-31" style="position: relative;">
    <div class="owl-carousel loop-block-31 ">
      <div class="block-30 block-30-sm item" style="background-image: url({{url_for('static',filename='images/bg_1.jpg')}});" data-stellar-background-ratio="0.5">
        <div class="container">
          <div class="row align-items-center justify-content-center text-center">
            <div class="col-md-7">
              <h2 class="heading mb-5">‡§™‡§∂‡•Å ‡§∏‡•á‡§µ‡§æ ‡§Ö‡§∏‡•ç‡§Æ‡§æ‡§ï‡§Ç ‡§ß‡§∞‡•ç‡§Æ‡§É</h2>
              <!-- <p style="display: inline-block;"><a href="https://vimeo.com/channels/staffpicks/93951774"  data-fancybox class="ftco-play-video d-flex"><span class="play-icon-wrap align-self-center mr-4"><span class="ion-ios-play"></span></span> <span class="align-self-center">Watch Video</span></a></p> -->
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </div>
  
  <div class="site-section section-counter">
    <div class="container">
      <div class="row">
        <div class="col-md-6 pr-5">
          <div class="block-48">
              <span class="block-48-text-1">Cared for Over</span>
              <br><br>
              <div class="block-48-counter ftco-number" data-number="6209">0</div>
              <br>
              <span class="block-48-text-1 mb-4 d-block">Animals in Meerut and Beyond</span>
            </div>
        </div>
        <div class="col-md-6 welcome-text">
          <h2 class="display-4 mb-3">Who Are We?</h2>
          <p class="lead">Right here in Meerut, and extending our care across nearby regions, we at Sankalap Ek Sewa Foundation are dedicated to the welfare of street dogs, stray cows, and other animals in need. Our compassionate efforts ensure they receive medical treatment, shelter, and love, transforming their lives one step at a time.</p>
          <p class="mb-4">A small team of veterinarians and volunteers works tirelessly, supported by the local community, to provide the necessary care and resources for these voiceless creatures.</p>
        </div>
      </div>
    </div>
  </div>

  <div class="site-section fund-raisers bg-light">
    <div class="container">
      <div class="row mb-3 justify-content-center">
        <div class="col-md-8 text-center">
          <h2>Latest Fundraisers</h2>
          <p class="lead">Help save street animals! Our latest fundraisers focus on emergency veterinary care, safe shelters, and nourishment for stray dogs, cows, and more.</p>
        </div>
      </div>
    </div>
  
    <div class="container-fluid">
      <div class="col-md-12 block-11">
        <div class="nonloop-block-11 owl-carousel">
          {% for fundraiser in fundraisers %}
            <div class="card fundraise-item">
              <a href="/fundraiser/{{ fundraiser.id }}"><img class="card-img-top" src="{{ fundraiser.image_url or 'images/img_' ~ loop.index ~ '.jpg' }}" alt="Fundraiser Image"></a>
              <div class="card-body">
                <h3 class="card-title"><a href="/fundraiser/{{ fundraiser.id }}">{{ fundraiser.name }}</a></h3>
                <p class="card-text">Amount: ‚Çπ{{ fundraiser.amount|default('N/A') }}</p>
                <p class="card-text">{{ fundraiser.description|truncate(100, true) }}</p>
                <p><a href="/donate" class="link-underline">Donate Now</a></p>
              </div>
            </div>
          {% else %}
            <div class="card fundraise-item">
              <div class="card-body">
                <p class="card-text">No fundraisers available yet. Check back soon for new opportunities to support our cause!</p>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div> <!-- .section -->

  <div class="featured-section overlay-color-2" style="background-image: url('images/bg_8.jpg');">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <img src="{{ url_for('static', filename='images/img.jpg') }}" alt="Image placeholder" class="img-fluid">
        </div>
        <div class="col-md-6 pl-md-5">
          <span class="featured-text d-block mb-3" style="color: black">Success Story</span>
          <h2 style="color:black; font-weight: 600;">üêæ A New Dawn for Animal Welfare: SESF Launches Meerut‚Äôs First Animal Ambulance</h2>
          <p class="mb-3" style="color: black;">With Meerut's first animal ambulance, SESF turns compassion into rapid response‚Äîredefining how a city protects its voiceless lives.</p>
          <p><a href="/success/1" class="btn btn-success btn-hover-white py-3 px-5">Read The Full Story</a></p>
          <!-- <p class="mt-3"><a href="/success/all" class="link-underline-ss" style="color: #000; text-decoration: underline; transition: all 0.3s ease;">More Success Stories</a></p> -->
        </div>
      </div>
    </div>
  </div> <!-- .featured-donate -->

  <div class="site-section bg-light">
    <div class="container">
      <div class="row mb-5">
        <div class="col-md-12">
          <h2 style="text-align: center;">Latest Instagram Update</h2>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <div class="juicer-feed-container" style="position: relative;">
            <div class="juicer-feed" data-feed-id="sankalapeksewa" style="display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center;">
              <!-- Juicer.io will inject the Reels here -->
            </div>
            <button id="expand-btn" class="btn btn-primary mt-3" style="display: none;">Expand to See More</button>
          </div>
          <script type="text/javascript" src="https://www.juicer.io/embed/sankalapeksewa/embed-code.js?per=6&theme=light" async defer></script>
        </div>
      </div>
    </div>
  </div> <!-- .section -->

  <!-- CSS for Animations and Styling -->
  <style>
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .pulse-animation {
      animation: pulse 1.5s infinite;
    }

    .juicer-feed .item {
      margin: 5px;
      overflow: hidden;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }

    .juicer-feed .item:hover {
      transform: scale(1.05); /* Slight hover effect for elegance */
    }

    .juicer-feed-container .juicer-feed .item {
      display: none; /* Hide all initially */
    }

    .juicer-feed-container .juicer-feed .item.visible {
      display: block; /* Show visible items */
    }

    /* Limit to 1 row initially */
    .juicer-feed-container .juicer-feed {
      overflow: hidden;
    }

    .juicer-feed-container .juicer-feed.row-1 .item {
      display: block; /* Show only 1 row initially */
    }

    #expand-btn {
      position: relative;
      z-index: 1001;
    }
  </style>

  <!-- JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const feed = document.querySelector('.juicer-feed');
      const expandBtn = document.getElementById('expand-btn');
      let visibleItems = 0;
      let expandCount = 0;

      // Wait for Juicer to load the feed
      const checkFeed = setInterval(() => {
        if (feed.children.length > 0) {
          clearInterval(checkFeed);
          const items = Array.from(feed.children);
          visibleItems = Math.min(4, items.length); // Show 1 row (4 items initially)
          feed.classList.add('row-1'); // Apply row-1 class for initial display
          items.slice(0, visibleItems).forEach(item => item.classList.add('visible'));
          expandBtn.style.display = items.length > visibleItems ? 'block' : 'none';
        }
      }, 500);

      expandBtn.addEventListener('click', () => {
        expandCount++;
        const items = Array.from(feed.children);
        let newVisibleItems;

        if (expandCount === 1) {
          newVisibleItems = Math.min(12, items.length); // Show 3 rows (12 items max with 6 fetched)
        } else {
          newVisibleItems = items.length; // Show all on second click
        }

        items.slice(visibleItems, newVisibleItems).forEach(item => item.classList.add('visible'));
        visibleItems = newVisibleItems;

        if (visibleItems >= items.length) {
          expandBtn.style.display = 'none';
        }
      });
    });

    // Smooth scroll function
    function smoothScroll(target) {
      document.querySelector(target).scrollIntoView({ behavior: 'smooth' });
    }
  </script>
{% endblock %}